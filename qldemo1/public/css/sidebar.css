/* ====== Kích thước ====== */
:root{
  --sidebar-open: 280px;
  --sidebar-closed: 40px;
  --sidebar-bg: #164B71;
}

/* ====== Sidebar: nền trực tiếp, không ::before ====== */
.sidebar{
  position: sticky; top:0;
  width: var(--sidebar-open);
  min-width: var(--sidebar-open);
  max-width: var(--sidebar-open);
  flex: 0 0 var(--sidebar-open);

  min-height: 100vh;
  background: var(--sidebar-bg);   /* nền đặt thẳng ở đây */
  color: #fff;
  box-sizing: border-box;
  display: flex; flex-direction: column; align-items: center;
  padding: 16px 12px;
  overflow: hidden;

  border-top-right-radius: 14px;
  border-bottom-right-radius: 14px;
  box-shadow: 4px 0 8px rgba(0,0,0,.18);

  transition:
    width .35s ease,
    min-width .35s ease,
    max-width .35s ease,
    padding .25s ease,
    box-shadow .25s ease,
    border-radius .25s ease;
  will-change: width;
}

/* ====== Thu gọn ====== */
body.sidebar-collapsed .sidebar{
  width: var(--sidebar-closed);
  min-width: var(--sidebar-closed);
  max-width: var(--sidebar-closed);
  flex-basis: var(--sidebar-closed);
  padding: 8px 6px;
  box-shadow: 3px 0 8px rgba(0,0,0,.25);
}

/* ====== Nút toggle ====== */
.sidebar .sidebar-toggle{
  position:absolute; top:10px; left:10px;
  width:28px; height:28px; border:0; border-radius:6px;
  background:rgba(255,255,255,.12);
  display:flex; align-items:center; justify-content:center; gap:3px;
  cursor:pointer; z-index:2; transition: background .2s;
}
.sidebar .sidebar-toggle:hover{ background:rgba(255,255,255,.2); }
.sidebar .sidebar-toggle .dot{ width:4px; height:4px; border-radius:50%; background:#fff; display:inline-block; }
body.sidebar-collapsed .sidebar .sidebar-toggle{ left:50%; transform:translateX(-50%); background:transparent; }

/* ====== Nội dung bên trong: mờ/dịch nhẹ cho đồng bộ ====== */
.sidebar .brand,
.sidebar .user-info,
.sidebar nav,
.sidebar form{
  width:100%; max-width:100%; box-sizing:border-box;
  opacity: 1; transform: translateX(0);
  transition: opacity .25s ease, transform .25s ease;
  will-change: opacity, transform;
}
body.sidebar-collapsed .sidebar .brand,
body.sidebar-collapsed .sidebar .user-info,
body.sidebar-collapsed .sidebar nav,
body.sidebar-collapsed .sidebar form{
  opacity: 0; transform: translateX(-16px); pointer-events: none;
}

/* ====== Mobile ====== */
@media (max-width: 991.98px){
  .sidebar{ position:fixed; z-index:1030; left:0; top:0; height:100vh; border-radius:0; }
}

/* ====== Reduced motion ====== */
@media (prefers-reduced-motion: reduce){
  .sidebar, .sidebar * { transition:none !important; transform:none !important; }
}

/* ====== Style phụ giữ nguyên ====== */
.sidebar .brand{ margin-bottom:1.25rem; }
.sidebar .brand .logo{ width:180px; height:auto; display:block; margin:0 auto; filter:drop-shadow(0 3px 3px rgba(0,0,0,.3)); transition: transform .2s; }
.sidebar .brand .logo:hover{ transform:scale(1.04); }
.user-info{ margin-top:12px; margin-bottom:20px; }
.sidebar nav{ margin-top:8px; }
.sidebar nav .nav-link{
  color:#fff; border-radius:8px; padding:8px 12px; width:100%;
  display:flex; align-items:center; gap:8px; text-decoration:none;
  transition:background .18s ease, color .18s ease;
}
.sidebar nav .nav-link:hover{ background:rgba(255,255,255,.10); }
.sidebar nav .nav-link.active{ background:rgba(255,255,255,.20); font-weight:600; }
.sidebar form button{ background:#fff; color:var(--sidebar-bg); border:1.5px solid #e4e9f0; border-radius:8px; font-weight:600; width:100%; }
.sidebar form button:hover{ background:#eaf3ff; border-color:#d7e6ff; color:#0f3d5e; }
/* Mobile: bỏ hết hiệu ứng thu gọn của desktop */
@media (max-width: 991.98px){
  body.sidebar-collapsed .sidebar{
    width: var(--sidebar-open);
    min-width: var(--sidebar-open);
    max-width: var(--sidebar-open);
    padding: 16px 12px;           /* trả padding như bình thường */
  }
  body.sidebar-collapsed .sidebar .brand,
  body.sidebar-collapsed .sidebar .user-info,
  body.sidebar-collapsed .sidebar nav,
  body.sidebar-collapsed .sidebar form{
    opacity: 1 !important;
    transform: none !important;
    pointer-events: auto !important;
  }

  /* Ẩn nút 3 chấm desktop để khỏi đè lên nút ☰ */
  .sidebar .sidebar-toggle{ display: none !important; }

  /* Đẩy nút Đăng xuất xuống đáy, không bị “trôi” */
  .sidebar{ display:flex; flex-direction:column; }
  .sidebar form{ margin-top: auto; }
}
